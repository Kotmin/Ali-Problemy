name: Debug Self-Hosted Runner
on: [push, pull_request, workflow_dispatch]

jobs:
  debug-runner:
    name: Check Self-Hosted Runner
    runs-on: [self-hosted, Ubuntu]
    steps:
      - name: Print Runner Info
        run: |
          echo "âœ… Self-hosted runner dziaÅ‚a!"
          uname -a
          whoami

      - name: Simulate Failure if Runner Stops
        run: |
          echo "â„¹ï¸ Sprawdzam, czy runner jest aktywny..."
          sleep 10  # MoÅ¼na wydÅ‚uÅ¼yÄ‡, by symulowaÄ‡ dÅ‚uÅ¼szy test
          echo "ğŸ›‘ Runner przestaÅ‚ odpowiadaÄ‡!" && exit 1
        continue-on-error: true  # Pozwala nam przejÅ›Ä‡ do kolejnego kroku

      - name: Comment on PR if Runner Failed
        if: failure() && github.event_name == 'pull_request'
        uses: mshick/add-pr-comment@v2
        with:
          message: "âš ï¸ Self-hosted runner przestaÅ‚ dziaÅ‚aÄ‡! SprawdÅº jego status w repozytorium."
          repo-token: ${{ secrets.GITHUB_TOKEN }}

      - name: Log Failure Warning
        if: failure()
        run: echo "âŒ Runner nie dziaÅ‚a poprawnie. SprawdÅº jego status!"
